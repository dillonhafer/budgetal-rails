<div class='<%= selector %>' style="width: 100%;max-width: 100%;height: 200px"></div>
<%= javascript_include_tag "https://www.google.com/jsapi" %>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Money', '%'],      
      ['Spent',  <%= percent_used.nan? ? 0 : percent_used.round %>],      
      ['Remaining', <%= 100 - (percent_used.nan? ? 0 : percent_used).round %>]
    ]);

    var options = {      
      pieHole: 0.4,
    };    

    var elements = document.querySelectorAll('.<%= selector %>');
    Array.prototype.forEach.call(elements, function(el, i){
      var chart = new google.visualization.PieChart(el);
      chart.draw(data, options);
    });
  }
  
  $(document).ready(function() {
    drawChart()
  });
</script>

