<div class='<%= selector %>' style="width: 100%;max-width: 100%;height: 200px"></div>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Money', '%'],
      ['Spent',  <%= percent_used.to_f.nan? ? 0 : percent_used.round %>],
      ['Remaining', <%= 100 - (percent_used.to_f.nan? ? 0 : percent_used).round %>]
    ]);

    var options = {
      pieHole: 0.4,
      colors: ['#6699ff', '#f6c86f']
    };

    var elements = document.querySelectorAll('.<%= selector %>');
    Array.prototype.forEach.call(elements, function(el, i){
      var chart = new google.visualization.PieChart(el);
      chart.draw(data, options);
    });
  }
  <%= 'drawChart();' if request.xhr? %>
</script>

